<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `Request` struct in crate `rotor_http`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, Request">

    <title>rotor_http::client::Request - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='../index.html'>rotor_http</a>::<wbr><a href='index.html'>client</a></p><script>window.sidebarCurrent = {name: 'Request', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='../index.html'>rotor_http</a>::<wbr><a href='index.html'>client</a>::<wbr><a class='struct' href=''>Request</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-613' class='srclink' href='../../src/rotor_http/client/request.rs.html#7' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct Request&lt;'a&gt;(_, pub <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>&gt;);</pre><h2 id='methods'>Methods</h2><h3 class='impl'><code>impl&lt;'a&gt; <a class='struct' href='../../rotor_http/client/struct.Request.html' title='rotor_http::client::Request'>Request</a>&lt;'a&gt;</code></h3><div class='impl-items'><h4 id='method.new' class='method'><code>fn <a href='#method.new' class='fnname'>new</a>(out_buf: &amp;mut <a class='struct' href='../../netbuf/buf/struct.Buf.html' title='netbuf::buf::Buf'>Buf</a>) -&gt; <a class='struct' href='../../rotor_http/client/struct.Request.html' title='rotor_http::client::Request'>Request</a></code></h4>
<div class='docblock'><p>Creates new response message by extracting needed fields from Head</p>
</div><h4 id='method.start' class='method'><code>fn <a href='#method.start' class='fnname'>start</a>(&amp;mut self, method: &amp;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>, path: &amp;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>, version: <a class='enum' href='../../rotor_http/server/enum.Version.html' title='rotor_http::server::Version'>Version</a>)</code></h4>
<div class='docblock'><p>Write request line</p>

<p>This puts request line into a buffer immediately. If you don&#39;t
continue with request it will be sent to the network shortly.</p>

<h1 id='panics' class='section-header'><a href='#panics'>Panics</a></h1>
<p>When request line is already written. It&#39;s expected that your request
handler state machine will never call the method twice.</p>
</div><h4 id='method.add_header' class='method'><code>fn <a href='#method.add_header' class='fnname'>add_header</a>(&amp;mut self, name: &amp;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>, value: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, HeaderError&gt;</code></h4>
<div class='docblock'><p>Add header to message</p>

<p>Header is written into the output buffer immediately. And is sent
as soon as the next loop iteration</p>

<p><code>Content-Length</code> header must be send using the <code>add_length</code> method
and <code>Transfer-Encoding: chunked</code> must be set with the <code>add_chunked</code>
method. These two headers are important for the security of HTTP.</p>

<p>Note that there is currently no way to use a transfer encoding other
than chunked.</p>

<p>We return Result here to make implementing proxies easier. In the
application handler it&#39;s okay to unwrap the result and to get
a meaningful panic (that is basically an assertion).</p>

<h1 id='panics-1' class='section-header'><a href='#panics-1'>Panics</a></h1>
<p>Panics when <code>add_header</code> is called in the wrong state.</p>
</div><h4 id='method.add_length' class='method'><code>fn <a href='#method.add_length' class='fnname'>add_length</a>(&amp;mut self, n: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u64.html'>u64</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, HeaderError&gt;</code></h4>
<div class='docblock'><p>Add a content length to the message.</p>

<p>The <code>Content-Length</code> header is written to the output buffer immediately.
It is checked that there are no other body length headers present in the
message. When the body is send the length is validated.</p>

<h1 id='panics-2' class='section-header'><a href='#panics-2'>Panics</a></h1>
<p>Panics when <code>add_length</code> is called in the wrong state.</p>
</div><h4 id='method.add_chunked' class='method'><code>fn <a href='#method.add_chunked' class='fnname'>add_chunked</a>(&amp;mut self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, HeaderError&gt;</code></h4>
<div class='docblock'><p>Sets the transfer encoding to chunked.</p>

<p>Writes <code>Transfer-Encoding: chunked</code> to the output buffer immediately.
It is assured that there is only one body length header is present
and the body is written in chunked encoding.</p>

<h1 id='panics-3' class='section-header'><a href='#panics-3'>Panics</a></h1>
<p>Panics when <code>add_chunked</code> is called in the wrong state.</p>
</div><h4 id='method.is_started' class='method'><code>fn <a href='#method.is_started' class='fnname'>is_started</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></h4>
<div class='docblock'><p>Returns true if at least <code>status()</code> method has been called</p>

<p>This is mostly useful to find out whether we can build an error page
or it&#39;s already too late.</p>
</div><h4 id='method.done_headers' class='method'><code>fn <a href='#method.done_headers' class='fnname'>done_headers</a>(&amp;mut self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>, HeaderError&gt;</code></h4>
<div class='docblock'><p>Checks the validity of headers. And returns <code>true</code> if entity
body is expected.</p>

<p>Specifically <code>false</code> is returned when status is 101, 204, 304 or the
request is HEAD. Which means in both cases where response body is
either ignored (304, HEAD) or is denied by specification. But not
when response is zero-length.</p>

<p>Similarly to <code>add_header()</code> it&#39;s fine to <code>unwrap()</code> here, unless you&#39;re
doing some proxying.</p>

<h1 id='panics-4' class='section-header'><a href='#panics-4'>Panics</a></h1>
<p>Panics when response is in a wrong state</p>
</div><h4 id='method.write_body' class='method'><code>fn <a href='#method.write_body' class='fnname'>write_body</a>(&amp;mut self, data: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>)</code></h4>
<div class='docblock'><p>Write a chunk of the body</p>

<p>Works both for fixed-size body and chunked body.</p>

<p>For the chunked body each chunk is put into the buffer immediately
prefixed by chunk size.</p>

<p>For both modes chunk is put into the buffer, but is only sent when
rotor-stream state machine is reached. So you may put multiple chunks
into the buffer quite efficiently.</p>

<p>For Ignored body you can <code>write_body</code> any number of times, it&#39;s just
ignored. But it&#39;s more efficient to check it with <code>needs_body()</code></p>

<h1 id='panics-5' class='section-header'><a href='#panics-5'>Panics</a></h1>
<p>When response is in wrong state. Or there is no headers which
determine response body length (either Content-Length or
Transfer-Encoding)</p>
</div><h4 id='method.is_complete' class='method'><code>fn <a href='#method.is_complete' class='fnname'>is_complete</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></h4>
<div class='docblock'><p>Returns true if <code>done()</code> method is already called and everything
was okay.</p>
</div><h4 id='method.done' class='method'><code>fn <a href='#method.done' class='fnname'>done</a>(&amp;mut self)</code></h4>
<div class='docblock'><p>Writes needed final finalization data into the buffer and asserts
that response is in the appropriate state for that.</p>

<p>The method may be called multiple times</p>

<h1 id='panics-6' class='section-header'><a href='#panics-6'>Panics</a></h1>
<p>When the response is in the wrong state or when Content-Length bytes
are not written yet</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><code>impl&lt;'a&gt; <a class='trait' href='https://doc.rust-lang.org/nightly/core/convert/trait.From.html' title='core::convert::From'>From</a>&lt;Message&lt;'a&gt;&gt; for <a class='struct' href='../../rotor_http/client/struct.Request.html' title='rotor_http::client::Request'>Request</a>&lt;'a&gt;</code></h3><div class='impl-items'><h4 id='method.from' class='method'><code>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.From.html#method.from' class='fnname'>from</a>(msg: Message) -&gt; <a class='struct' href='../../rotor_http/client/struct.Request.html' title='rotor_http::client::Request'>Request</a></code></h4>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "rotor_http";
        window.playgroundUrl = "";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    
    <script defer src="../../search-index.js"></script>
</body>
</html>